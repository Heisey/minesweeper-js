
// ????????????????????????????????????????????????????????????????
// ?????????????????????????? Game Tile ???????????????????????????
// ????????????????????????????????????????????????????????????????

// ??????????????????????? Vendor Modules ?????????????????????????
import React from 'react';
import { connect } from 'react-redux'

// ???????????????????????? File Modules ??????????????????????????

// ?? Styles
import './GameTile.scss'

const Tile = (props) => {

  const { 
    info,
    flagTile,
    tileClickEvent,
    board
  } = props

  const {
    gameParams
  } = props

  const handleTileClickEvent = () => {
    tileClickEvent(info.grid, board, gameParams)
  }

  const handleRightClickEvent = e => {
    e.preventDefault()
    flagTile(info.grid)
  }

  return (
    <div 
      className={`GameTile ${info.clicked && 'GameTile__clicked'} ${info.exploded && 'GameTile__boom'}`}
      onClick={handleTileClickEvent}
      onContextMenu={handleRightClickEvent}
    >
      {info.clicked && (<div className="GameTile__info">
        {info.bomb ? <i className="fas fa-bomb"></i> : info.number}
      </div>)}
      
      {(info.flagged && !info.clicked) && (
        <div className="GameTile__flagged">
          <i className="fas fa-flag"></i>
        </div>
      )}
    </div>
  )
}

const mapStateToProps = state => {
  return {
    gameParams: state.gameLogic.gameParams
  }
}

export default connect(mapStateToProps)(Tile)