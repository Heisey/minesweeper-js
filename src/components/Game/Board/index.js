// ????????????????????????????????????????????????????????????????
// ????????????????????????? Game Board ???????????????????????????
// ????????????????????????????????????????????????????????????????

// ??????????????????????? Vendor Modules ?????????????????????????
import React from 'react';
import { connect } from 'react-redux'

// ???????????????????????? File Modules ??????????????????????????
// ?? Components
import Game from '..'

// ?? Styles
import styles from './styles'

const Board = (props) => {

  const {
    board,
    flagTile,
    tileClickEvent,
  } = props;

  const {
    gameParams
  } = props

  const gameBoard = () => {
    return (
      <styles.Base
        difficulty={gameParams.difficulty}
      >
        {board.map(row => row.map(tileObj => (
          <Game.Tile 
            key={`${tileObj.grid}`}
            info={tileObj}
            flagTile={flagTile}
            tileClickEvent={tileClickEvent}
            board={board}
          />
        )))}
      </styles.Base>
    )
  }

  const waitingMessage = () => {
    return (
      <h1>
        Loading
      </h1>
    )
  }

  const propCheck = () => {
    if (gameParams === null) {
      return waitingMessage()
    } else {
      return gameBoard()
    }
  }

  return propCheck()
}

const mapStateToProps = (state) => {

  return {
    gameParams: state.gameLogic.gameParams
  }
}

export default connect(mapStateToProps)(Board)